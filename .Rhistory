hls |>
select(id, hwage,educ,exper) |>
summarise(ave_wage = mean(hwage),
max_wage = max(hwage),
nobs = n())
help("summarise")
hls |>
select(id, hwage,educ,exper) |>
summarise(ave_wage = mean(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n())
hls |>
select(id, hwage,educ,exper) |>
summarise(ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n())
data.frame(ave_wage = mean(hls$hwage),
min_wage = min(hls$hwage),
max_wage = max(hls$hwage),
sd_wage = sd(hls$hwage),
nobs = nrow(hls))
hls |>
select(id, hwage,educ,exper) |>
summarise(ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n())
hls |>
summarise(.by = educ,
ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n())
hls |>
summarise(.by = educ,
ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n())
hls |>
summarise(.by = gender,
ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n())
hls |>
summarise(.by = c(gender,educ),
ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n())
hls |>
summarise(.by = c(gender,educ),
ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n()) |>
arrange(gender,educ)
hls |>
summarise(.by = c(gender,educ),
ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n()) |>
arrange(educ,gender)
head(hls)
hls |>
summarise(.by = c(educ),
ave_wage = mean(hwage),
min_wage = min(hwage),
max_wage = max(hwage),
sd_wage = sd(hwage),
nobs = n()) |>
arrange(educ,gender)
hls |>
summarise(.by = c(educ),
ave_wage = mean(hwage)
)
hls |>
summarise(.by = c(educ),
ave_wage = mean(hwage)
)
hls |>
summarise(.by = c(educ),
ave_wage = mean(hwage)
)
hls |>
summarise(.by = c(educ),
ave_wage = mean(hwage)
) -> ozet
ozet
hls2 = merge(hls,ozet,by=educ)
hls2 = merge(hls,ozet,by="educ")
head(hls2)
View(hls2)
hls2 |>
mutate(gor_ucret = hwage/ave_wage) |>
select(id,educ,hwage,ave_wage,gor_ucret)
hls2 |>
mutate(gor_ucret = hwage/ave_wage) |>
select(id,educ,hwage,ave_wage,gor_ucret) |>
slice(sample(1:762, 20))
View(hls)
hls |>
mutate(.by = educ,
ave_wage = mean(hwage),
gor_ucret = hwage/ort_ucret) |>
select(id,educ,hwage,ave_wage,gor_ucret) |>
slice(sample(1:762, 20))
hls |>
mutate(.by = educ,
ave_wage = mean(hwage),
gor_ucret = hwage/ave_wage) |>
select(id,educ,hwage,ave_wage,gor_ucret) |>
slice(sample(1:762, 20))
hls |>
mutate(.by = educ,
ort_ucret = mean(hwage),
gor_ucret = hwage/ort_ucret) |>
select(id,educ,hwage,ort_ucret,gor_ucret) |>
filter(id %in% c(41,72,741))
hls |>
slice(1:20)
hls |>
select(id,educ,hwage) |>
slice(1:20)
hls |>
select(id,educ,hwage) |>
slice(1:15)
hls |>
select(id,educ,hwage) |>
slice(1:15) |>
summarise(.by = educ,
ave_wage = mean(hwage))
hls |>
select(id,educ,hwage) |>
slice(1:15) |>
mutate(.by = educ,
ave_wage = mean(hwage))
hls |>
select(id,educ,hwage) |>
slice(1:15) |>
mutate(.by = educ,
ave_wage = mean(hwage)) |>
arrange(educ)
hls |>
select(id,educ,hwage) |>
slice(1:15) |>
summarise(.by = educ,
ave_wage = mean(hwage))
wn = 300 + 10*ave_edu + 20*ave_age
wm = 200 + 20*ave_edu + 15*ave_age
wn
ave_edu = 13.1
ave_age = 42.2
wn = 300 + 10*ave_edu + 20*ave_age
wm = 200 + 20*ave_edu + 15*ave_age
wn
wm
wn-wm
wn
wm
1355-602
ave_edu = 10
ave_age = 10
wn = 300 + 10*ave_edu + 20*ave_age
wm = 200 + 20*ave_edu + 15*ave_age
wn
wm
wn-wm
url = "https://github.com/obakis/econ_data/raw/master/fake_mig_dat.rds"
download.file(url, "fake_mig_dat.rds", mode ="wb")
getwd()
url = "https://github.com/obakis/econ_data/raw/master/fake_mig_dat.rds"
download.file(url, "fake_mig_dat.rds", mode ="wb")
download.file(url, "fake_mig_dat.rds", mode ="wb")
mdat = readRDS("fake_mig_dat.rds")
head(mdat)
reg1 = lm(wage ~  age + educ + migrant, dat=mdat)
summary(reg1)
ave_edu = mean(mdat$educ)
ave_age = mean(mdat$age)
ave_edu
ave_age
summary(reg1)
w_m = predict(reg1, list(migrant=1,
age=ave_age, educ=ave_edu))
w_m
w_n = predict(reg1, list(migrant=0,
age=ave_age, educ=ave_edu))
w_n
1279-1052
w_m = predict(reg1, list(migrant=1,
age=10, educ=10))
w_m
w_n = predict(reg1, list(migrant=0,
age=10, educ=10))
w_n
1279-1052
701-474
log(1.6)
log(1.7)
log(1.69)
587*0.26
587*0.27
15.3/25.3
7/25.3
2.3/25.3
0.5/25.3
2.3/25.3
7/25.3
15.3/25.3
15/25
7/25
0.6/25.3
7/25
60+28+2
1031/2476
2476*0.671
0*/2476
90/2476
url = "https://github.com/obakis/econ_data/raw/master/wage1.rds"
getwd()
aaa = "https://github.com/obakis/econ_data/raw/master/wage1.rds"
aaa = "https://github.com/obakis/econ_data/raw/master/wage1.rds"
download.file(url=aaa, destfile = "wage1.rds")
download.file(url=aaa, destfile = "wage1.rds", mode="wb")
list.files(path=".", pattern = ".rds")
list.files(path="./Documents", pattern = ".rds")
getwd()
dat = readRDS("./Documents/wage1.rds")
head(dat)
head(dat)
y ~ x,
y ~ x,
aggregate(wage ~ educ, data=dat, FUN = mean)
aggregate(wage ~ educ, data=dat, FUN = sd)
aggregate(wage ~ educ, data=dat, FUN = var)
aggregate(wage ~ educ, data=dat, FUN = min)
aggregate(wage ~ educ, data=dat, FUN = max)
aggregate(wage ~ educ, data=dat, FUN = max)
aggregate(wage ~ educ, data=dat, FUN = median)
aggregate(wage ~ female, data=dat, FUN = median)
aggregate(wage ~ female, data=dat, FUN = mean)
7.10-4.59
lm(wage ~ female, data=dat)
lm(wage ~ female, data=dat)
reg=lm(wage ~ female, data=dat)
coef(reg)
b=coef(reg)
b
b[1]
b[2]
b[1] + b[2]
predict(reg)
predict(reg, newdata = list(female=0))
predict(reg, newdata = list(female=1))
predict(reg, newdata = list(female=0:1))
predict(reg, newdata = list(female=c(0,1)))
b[1] + b[2]
reg=lm(wage ~ female, data=dat)
predict(reg, newdata = list(female=c(0,1)))
predict(reg, newdata = list(female=c(0,1)))
reg=lm(wage ~ female, data=dat)
reg
reg2=lm(wage ~ educ, data=dat)
reg2
aggregate(wage ~ educ, data=dat, FUN = mean)
reg2=lm(wage ~ factor(educ), data=dat)
reg2
3.53 + 0.22
unique(dat$educ)
e_vals=unique(dat$educ)
reg2=lm(wage ~ factor(educ), data=dat)
reg2
e_vals=unique(dat$educ)
predict(reg2, newdata = list(educ=e_vals))
head(dat)
dat = dat |>
mutate(educ_gr = factor(educ))
library(dplyr)
dat = dat |>
mutate(educ_gr = factor(educ))
head(dat)
reg2=lm(wage ~ educ_gr, data=dat)
reg2
e_vals=unique(dat$educ_gr)
predict(reg2, newdata = list(educ=e_vals))
e_vals=unique(dat$educ_gr)
predict(reg2, newdata = list(educ_gr=e_vals))
e_vals
unique(dat$educ)
e_vals2=sort(unique(dat$educ))
e_vals2
dat = dat |>
mutate(educ_gr = factor(educ),
levels = e_vals2)
e_vals2=sort(unique(dat$educ))
e_vals2
dat = dat |>
mutate(educ_gr = factor(educ, levels = e_vals2))
dat |>
select(educ,educ_gr) |>
head(20)
reg2=lm(wage ~ educ_gr, data=dat)
reg2
predict(reg2, newdata = list(educ_gr=e_vals2))
e_vals2
predict(reg2, newdata = list(educ_gr=factor(e_vals2)))
coef(reg2)
summary(reg2)
e_vals2
reg1=lm(wage ~ educ, data=dat)
reg1
summary(reg1)
head(dat)
reg3=lm(wage ~ female , data=dat)
reg3
reg3=lm(wage ~ female + educ , data=dat)
reg3
reg3=lm(wage ~ female + educ + exper, data=dat)
reg3
reg3=lm(wage ~ female + educ + exper + tenure, data=dat)
reg3
reg3=lm(wage ~ female + educ + female:educ+ exper + tenure, data=dat)
reg3
summary(reg3)
contributors()
cars
knitr::opts_chunk$set(echo = TRUE)
furl = "https://github.com/obakis/econ_data/raw/master/tanzim_panel.rds"
download.file(furl, destfile = "tanzim_panel.rds", mode="wb")
tanzim = readRDS("tanzim_panel.rds")
head(tanzim)
reg_po1 = lm(inf ~ dsp+ y19 + nuts2, data=tanzim)
summary(reg_po1)
reg_po = feols(inf ~ dsp + nuts2 | y19, data=tanzim,
panel.id = c("id","year"), vcov="iid")
library(fixest)
reg_po = feols(inf ~ dsp + nuts2 | y19, data=tanzim, panel.id = c("id","year"), vcov="iid")
summary(reg_po)
head(tanzim)
reg_po = feols(inf ~ dsp + nuts2 | y19, data=tanzim, panel.id = c("id","year"), vcov="iid")
summary(reg_po)
reg_po = feols(inf ~ dsp   | nuts2 + y19, data=tanzim, panel.id = c("id","year"), vcov="iid")
summary(reg_po)
reg_po = feols(inf ~ dsp  + nuts2  |  y19, data=tanzim, panel.id = c("id","year"), vcov="iid")
summary(reg_po)
reg_po1 = lm(inf ~ dsp+ y19 + nuts2, data=tanzim)
summary(reg_po1)
library(fixest)
reg_po = feols(inf ~ dsp    | nuts2 + y19, data=tanzim, panel.id = c("id","year"), vcov="iid")
summary(reg_po)
reg_fe = feols(inf ~ dsp + nuts2 | id + year,
data=tanzim, panel.id = c("id","year"),
cluster = "nuts2") # vcov = "cluster" is not automatically implied !
summary(reg_fe)
reg_fd = feols(d(inf) ~ d(dsp)  |  nuts2 + year,
data=tanzim, panel.id = c("id","year"),
cluster = "nuts2") # vcov = "cluster" is not automatically implied !
summary(reg_fd)
reg_fd = feols(d(inf) ~ d(dsp)  |  nuts2 + year,
data=tanzim, panel.id = c("id","year"),
cluster = "nuts2") # vcov = "cluster" is not automatically implied !
reg_fd = feols(d(inf) ~ d(dsp)  |  year,
data=tanzim, panel.id = c("id","year"),
cluster = "nuts2") # vcov = "cluster" is not automatically implied !
summary(reg_fd)
reg_po = feols(inf ~ dsp | y19, data=tanzim, panel.id = c("id","year"), vcov="iid")
summary(reg_po)
reg_fd = feols(d(inf) ~ d(dsp)  |  year,
data=tanzim, panel.id = c("id","year"),
cluster = "nuts2") # vcov = "cluster" is not automatically implied !
summary(reg_fd)
reg_fe = feols(inf ~ dsp | id + year,
data=tanzim, panel.id = c("id","year"),
cluster = "nuts2") # vcov = "cluster" is not automatically implied !
summary(reg_fe)
delta = 0.06
t = 50
k_0 = 100
k_0*(1-delta)^t
k_0 = 101
k_0*(1-delta)^t
4.578403-4.533073
4.533073/100
#########################################################
##################### debugging
library(devtools)
setwd("~/bddk_data/rbrsa")
######### yeni install.
"rbrsa" %in% installed.packages()
remove.packages("rbrsa")
setwd("~/bddk_data/rbrsa")
# Try minimal rebuild
unlink("NAMESPACE")
unlink("man", recursive = TRUE)
######### yeni install.
"rbrsa" %in% installed.packages()
remove.packages("rbrsa")
setwd("~/bddk_data/rbrsa")
# Try minimal rebuild
unlink("NAMESPACE")
unlink("man", recursive = TRUE)
# Use roxygen2 without devtools
roxygen2::roxygenise()
source("data-raw/create_internal_data.R")
#########################################################
##################### updating
setwd("~/bddk_data/rbrsa")
# 1. Clean environment (optional but good practice)
rm(list = ls(pattern = "^fetch_|^list_|save_data|plaka_to_city"))
# 2. REGENERATE INTERNAL DATA (IF data-raw/ changed)
source("data-raw/create_internal_data.R")  # UNCOMMENT WHEN NEEDED
# 3. Rebuild documentation (ALWAYS do this after code OR data changes)
devtools::document()
# 3. Rebuild documentation (ALWAYS do this after code OR data changes)
devtools::document()
roxygen2::roxygenise()
# 3. Rebuild documentation (ALWAYS do this after code OR data changes)
devtools::document()
# Or install from inside R
install.packages(".", repos = NULL, type = "source")
# 5. test functionality
library(rbrsa)
list_groups("bddk")
# 6. check again
devtools::check()
list_groups("bddk")
# 8. Build fro CRAN
devtools::build() # tar.gz fro cran submission !
#########################################################
##################### updating
######### yeni install.
"rbrsa" %in% installed.packages()
remove.packages("rbrsa")
#########################################################
################### testing
pak::pkg_install("obakis/rbrsa")
library(rbrsa)
list_groups("bddk")
list_groups("finturk")
list_tables()
list_groups("bddk","tr")
list_groups("bddk","en")
list_groups("bddk","tr")
list_groups("bddk","en")
list_groups("bddk","tr")
dat = fetch_bddk(2005, 1,2024,12,table_no = 3, grup_kod = 10005)
save_data(dat, filename = "credits_TL_sectors_pri", format = "rds")
dat = fetch_bddk(2005, 1,2024,12,table_no = 3, grup_kod = 10006)
save_data(dat, filename = "credits_TL_sectors_pub", format = "rds")
# 6. check again
devtools::check()
# 8. Build fro CRAN
devtools::build() # tar.gz fro cran submission !
# Refresh your GitHub repository page (https://github.com/obakis/rbrsa). You should see all your package files.
# For all future updates, you can use your simple, familiar workflow:
#
# ##git add . #CALISMIYOR !!!
# git add --all
# git commit -m "Your update message"
# git push  # No need for `-u origin main` anymore!
#
#########################################################
##################### debugging
library(devtools)
setwd("~/bddk_data/rbrsa")
#########################################################
##################### updating
######### yeni install.
"rbrsa" %in% installed.packages()
remove.packages("rbrsa")
setwd("~/bddk_data/rbrsa")
# 1. Clean environment (optional but good practice)
rm(list = ls(pattern = "^fetch_|^list_|save_data|plaka_to_city"))
# 2. REGENERATE INTERNAL DATA (IF data-raw/ changed)
source("data-raw/create_internal_data.R")  # UNCOMMENT WHEN NEEDED
# 3. Rebuild documentation (ALWAYS do this after code OR data changes)
devtools::document() # or
# 4. installing locally first
message("Documentation updated. Now install using R CMD INSTALL:")
message("1. Open Terminal")
message("2. Run: cd ~/bddk_data/rbrsa")
message("3. Run: R CMD INSTALL .")
# 6. check again
devtools::check()
# 8. Build fro CRAN
devtools::build() # tar.gz fro cran submission !
# 8. Build fro CRAN
devtools::build() # tar.gz fro cran submission !
# 8. Build fro CRAN
devtools::build() # tar.gz fro cran submission !
# 8. Build fro CRAN
devtools::build() # tar.gz fro cran submission !
library(rbrsa)
list_groups("bddk")
list_groups("finturk")
list_tables()
fetch_bddk1(2005, 1,table_no = 3, grup_kod = 10001)
fetch_bddk1(2005, 1,table_no = c(1,3), grup_kod = 10001)
fetch_bddk1(2005, 1,table_no = c(1,3), grup_kod = 10001:1002)
